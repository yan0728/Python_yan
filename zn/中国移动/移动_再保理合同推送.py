
import hashlib
import requests
import json

# 推资产
var_method1 = 'extend.yidong.asset.create'
# 推合同
var_method2 = 'extend.yidong.contract.create'

var_channel = 'test07'
var_content = '9A77769D38977D06A0D8E4EDBDE3D04271B78F32C37687809292D0C4D0CCB643E712D01FF693C095D53FD70B86394DCFC2CEA8564171E914A4BDDB0B399F0FEFE6A57D11EA36CA082010583E0530FC2E2FD020DBFF96A3672EC8A3ABF0AF03DD8DAFDD7FDCEFF7F6CD0E79AC281EFEC260510C7F136E8859AB81ECAA9338E08368AB99F29B249C1AE9A4B8C5BE496B56752497FF3074A65A10D5C0DD206214A2F1175F8910D9C5226421E94013BECCC322A160F1684F580C962716775F9820F91EB9B3E7E5FDC111CB19A681C8C73F2EC52A7427819AD42648AF1DD790480D1BCD0A3D3FC4F4BF575FD4A197A6370F41CB9FEEE10DDB7C3E88C121784015882DCA378C8693FB1B4908D4CC14556B42FBC63DA5ED81CE9A597E9891670AEAE83821A4BBE033FEAE938A08DD0253D06CDBB5BC4B51982972B4574241151696811600F8797AE25A2D4B3CE77EDD0918D3F2FC682AF96E5BDE116063E5B057793216405B4B097BD9BE2055716BB1E1DA09FF20695781C2EF22F3E8ADDCE141187B71996368AD3653556622F315E4247A51D67A693DC13C7250F9444517402A0D7A24D950ADEB3514D06211696C7F942D585A46DB5A3C5D9B503B1FE8B10548C05EF48D0BE6B6BD0FBD495370A9B152AC4A5D3EC6EC805B228E85F1EFA8B6D14A5DA440133E8985317D324FA3BDF4667EDC2D74336CD745F0B5EAE3717D307895CC6F1156ACBAEAB3B955080D89D7723C613A5DD3BE2FF1CFBE7E9E052F93136224CB37B5A152D9C233CD11F27ED20E486C4DB472A798DEB17486F99AACBDB270D33DE32A068F846864F78F373375FF7E25E0A546B915741C75C3FBDF18B6138614501F43D32DB97EEF512A3497B4EBF88017B598490E9CE0163B74C672578A2F376FAA34F319D5D75FEE726C396BDE78CC6DA3DB55303B9A4AEE352A133134A1470D8B81AC8E760F50966D3AF579ED52892A4C7340CDFCDB751FE6334AFD966B8B423D575DBF05531448D5A445D7E9D00BD02755DF2166C676FB9CC97196B59F169E901961C4A24C2BD771D286598A581E93E66FD1CAE077CA5525F8428720FFE6CB6879A5B4947FC6174C53B3EF3CE75E62A5DBB7E38137D71461A97F976663D0FCFD26888A97366AF1F73791520183F1BECFB4367309F3B525A2CAA816D0574977C1899F7285CEC92D2FFDDCB962CEFE98C486C99C305D0D445B38B8267C99C8A58A2A74E652745F17BAA28EC8B89A2C537C8C985C9B67EA61AB145C230923AE7F263A327A41EE5F633526DAD39FAC75CBE702157B541E536D0EB3848ACAFD282293E4044516891F3000C0BBED28BF77822E3B9700E24AF0831F8F9E36D79FE8EC93E3E75912C8436340EDD3DD191E4472F0764CD0331B219F4A93F4177BDD8454D7785937A4481E66BCC6C63F6B4A10E95138D502AA02FB6E2847AFBA6BD115F44310A7A33B900DF8173476A27358C512FF9A33572EA1CAD770B9AEFB6FB18CDC6B5903BA6D8C3F67F1678A26AEB2518BACCA1570EFD463616DE7B30B9CA572A94D8BE4B00379A965122D2B2DEE37A3BBB38ACB75EF60FB4C9BF1F8E1E5F65D9B1CE4647D427C1CC3E622B06542B6C694B27667BFCB603B167EA94C71E6F0DF10B1140D20D29B9D321409508BF2F2C64EB04374ABD4076B0E675660323744A85936B94A8EB2A9633B04426E4693CDE278D165354561EC38402B77FABE735C380F144ABA8BFB2D7B1BDFEEDEE06525AA4073AD0590114D444332DD18CE17F5B49336B94A8EB2A9633B04426E4693CDE27841E655902701C2DD3AD5C4A3F223D78D2287AD94B59BA7E614834E05FA78C60188DE8913F12D22ED6043D25DF7E936F7DED99043ADECFB81C85B3147574D434CBD185013AD461E82B3132E4667176B762E1DA635B9B5773607C99865770AA8FE57A44981D13EBD407CD1A781D7DAA0C8B68AD5AD7AB0179B80A44E9B0DFA9011D6C72A9DC5983FC4CB57B37329EC194FB7040B19904C2DD06564440C742A2A4DC1E6AFF038C43D67E77971CCE1B42D4E18FE7D071748089639C08F2C3947D988C51B6DBA64BF659DA46B9350FF9C296A0FF368EB8670C9BEE53F326BE24D42A829A54C733375FA434906F3CBEE75B3CA1EE296438579E20225779D095F28B00A8B7A49F259C94003AFDBE7E2E5E21592F8BD76E93B8F27CD438E23C92755EAFF824C0372EDB3B6F23933CAD7DA38E088'
var_flowNo = '201200007'
var_method = var_method1
var_time = '20210430154937'
var_version = '1.0.1'

def pinChuan():
      chuan = ('IUY9JiCa35ktBHKrJaS3s+Q49GRXtbaW'
            'channel{}channel'
            'content{}content'
            'flowNo{}flowNo'
            'method{}method'
            'time{}time'
            'version{}version'
            'IUY9JiCa35ktBHKrJaS3s+Q49GRXtbaW'.format(var_channel,var_content,var_flowNo,var_method,var_time,var_version))
      print(chuan)
      return chuan


def AddMD5():
      str = pinChuan()
      # print("str:" + str)

      # 创建md5对象
      m = hashlib.md5()

      # Tips
      # 此处必须encode
      # 若写法为m.update(str)  报错为： Unicode-objects must be encoded before hashing
      # 因为python3里默认的str是unicode
      # 或者 b = bytes(str, encoding='utf-8')，作用相同，都是encode为bytes
      b = str.encode(encoding='utf-8')
      m.update(b)
      str_md5 = m.hexdigest()

      # print('MD5加密前为 ：' + str)
      # print('MD5加密后为小写 ：' + str_md5)

      # 另一种写法：b‘’前缀代表的就是bytes
      # str_md5 = hashlib.md5(b str).hexdigest()
      print('MD5加密后为大写 ：' + str_md5.upper())
      return str_md5.upper()

def qq():
      header = {'Content-Type':'application/json;charset=UTF-8',
                'User-Agent': 'Apache-HttpClient/4.5.5 (Java/1.8.0_121)','Connection':'keep-alive'}
      url = 'https://test-api-yidong.lianjieabs.com/external/resources'

      data = {
          "flowNo": var_flowNo,
          "content": var_content,
          "time": var_time,
          "method": var_method,
          "channel": var_channel,
          "version": var_version,
          "sign": AddMD5()
      }

      r = requests.post(url=url,data=json.dumps(data) ,headers=header)


      print(r.text)